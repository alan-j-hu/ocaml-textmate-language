<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>TmLanguage (textmate-language.TmLanguage)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">textmate-language</a> &#x00BB; TmLanguage</nav><h1>Module <code>TmLanguage</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The collection of TextMate grammars.</p></dd></dl><dl><dt class="spec type" id="type-grammar"><a href="#type-grammar" class="anchor"></a><code><span class="keyword">type</span> grammar</code></dt><dd><p>A TextMate grammar.</p></dd></dl><dl><dt class="spec type" id="type-stack"><a href="#type-stack" class="anchor"></a><code><span class="keyword">type</span> stack</code></dt><dd><p>The state of the code highlighter.</p></dd></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> string</code></dt><dd><p>The error message is purely informational and is not to be matched on.</p></dd></dl><dl><dt class="spec type" id="type-plist"><a href="#type-plist" class="anchor"></a><code><span class="keyword">type</span> plist</code> = <code>[ </code><table class="variant"><tr id="type-plist.Bool" class="anchored"><td class="def constructor"><a href="#type-plist.Bool" class="anchor"></a><code>| </code><code>`Bool <span class="keyword">of</span> bool</code></td></tr><tr id="type-plist.Data" class="anchored"><td class="def constructor"><a href="#type-plist.Data" class="anchor"></a><code>| </code><code>`Data <span class="keyword">of</span> string</code></td></tr><tr id="type-plist.Date" class="anchored"><td class="def constructor"><a href="#type-plist.Date" class="anchor"></a><code>| </code><code>`Date <span class="keyword">of</span> float * <span>float option</span></code></td></tr><tr id="type-plist.Float" class="anchored"><td class="def constructor"><a href="#type-plist.Float" class="anchor"></a><code>| </code><code>`Float <span class="keyword">of</span> float</code></td></tr><tr id="type-plist.Int" class="anchored"><td class="def constructor"><a href="#type-plist.Int" class="anchor"></a><code>| </code><code>`Int <span class="keyword">of</span> int</code></td></tr><tr id="type-plist.String" class="anchored"><td class="def constructor"><a href="#type-plist.String" class="anchor"></a><code>| </code><code>`String <span class="keyword">of</span> string</code></td></tr><tr id="type-plist.Array" class="anchored"><td class="def constructor"><a href="#type-plist.Array" class="anchor"></a><code>| </code><code>`Array <span class="keyword">of</span> <span><a href="index.html#type-plist">plist</a> list</span></code></td></tr><tr id="type-plist.Dict" class="anchored"><td class="def constructor"><a href="#type-plist.Dict" class="anchor"></a><code>| </code><code>`Dict <span class="keyword">of</span> <span><span>(string * <a href="index.html#type-plist">plist</a>)</span> list</span></code></td></tr></table><code> ]</code></dt><dd><p>A plist document. This is the same plist type that is defined in the <a href="https://opam.ocaml.org/packages/plist-xml/"><code>plist-xml</code></a> package (as of version 0.3.0), but is reproduced here as not to depend on <code>plist-xml</code>.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Create an empty collection of grammars.</p></dd></dl><dl><dt class="spec value" id="val-add_grammar"><a href="#val-add_grammar" class="anchor"></a><code><span class="keyword">val</span> add_grammar : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-grammar">grammar</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Add a grammar to the collection.</p></dd></dl><dl><dt class="spec value" id="val-find_by_name"><a href="#val-find_by_name" class="anchor"></a><code><span class="keyword">val</span> find_by_name : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-grammar">grammar</a> option</span></code></dt><dd><p>Finds a grammar by its <code>name</code> attribute. Case-insensitive.</p></dd></dl><dl><dt class="spec value" id="val-find_by_scope_name"><a href="#val-find_by_scope_name" class="anchor"></a><code><span class="keyword">val</span> find_by_scope_name : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-grammar">grammar</a> option</span></code></dt><dd><p>Finds for a grammar by its <code>scopeName</code> attribute. Case-sensitive.</p></dd></dl><dl><dt class="spec value" id="val-of_plist_exn"><a href="#val-of_plist_exn" class="anchor"></a><code><span class="keyword">val</span> of_plist_exn : <a href="index.html#type-plist">plist</a> <span>&#45;&gt;</span> <a href="index.html#type-grammar">grammar</a></code></dt><dd><p>Reads a TextMate grammar from a plist file. Raises <a href="index.html#exception-Error"><code>Error</code></a> if the plist does not represent a valid TextMate grammar.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-stack">stack</a></code></dt><dd><p>The initial state of the code highlighter.</p></dd></dl><dl><dt class="spec type" id="type-token"><a href="#type-token" class="anchor"></a><code><span class="keyword">type</span> token</code></dt><dd><p>A token of code.</p></dd></dl><dl><dt class="spec value" id="val-ending"><a href="#val-ending" class="anchor"></a><code><span class="keyword">val</span> ending : <a href="index.html#type-token">token</a> <span>&#45;&gt;</span> int</code></dt><dd><p>One past the index of the last character of the token.</p><p>If <code>tok</code> is the first token of the line, <code>tok</code> spans the substring within interval [<code>0</code>, <code>ending tok</code>). If <code>tok</code> succeeds a token <code>prev</code>, <code>tok</code> spans the substring within interval [<code>ending prev</code>, <code>ending tok</code>).</p></dd></dl><dl><dt class="spec value" id="val-scopes"><a href="#val-scopes" class="anchor"></a><code><span class="keyword">val</span> scopes : <a href="index.html#type-token">token</a> <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p>The token's stack of TextMate grammar scopes.</p></dd></dl><dl><dt class="spec value" id="val-tokenize_exn"><a href="#val-tokenize_exn" class="anchor"></a><code><span class="keyword">val</span> tokenize_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-grammar">grammar</a> <span>&#45;&gt;</span> <a href="index.html#type-stack">stack</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-token">token</a> list</span> * <a href="index.html#type-stack">stack</a></code></dt><dd><p>Usage: <code>let tokens, stack = tokenize_exn t grammar stack line</code></p><p>Tokenizes a line of code. Returns the list of tokens <code>tokens</code> and the updated tokenization state <code>stack</code>.</p><p>Precondition:</p><ul><li><code>line</code> must be a single line, including the newline character at the end.</li></ul><p>Postconditions:</p><ul><li><code>tokens</code> is nonempty.</li><li>The <code>ending</code> of the last token in <code>tokens</code> is always <code>String.length line</code>.</li></ul><p>Raises <a href="index.html#exception-Error"><code>Error</code></a> if it tries to match a malformed <code>end</code> or <code>while</code> regex.</p><p>Raises <a href="index.html#exception-Error"><code>Error</code></a> if it tries to access a local repository that doesn't exist in the file. Currently, it silently ignores <code>include</code>s of other grammars that don't exist in <code>t</code>.</p></dd></dl></div></body></html>